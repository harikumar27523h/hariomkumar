<!DOCTYPE>
<html>
    <head>
        <title>Jarvis Chatbot</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
            #jarvis-box {
                position: fixed;
                bottom: 30px;
                right: 30px;
                width: 320px;
                background: #222;
                color: #fff;
                border-radius: 10px;
                box-shadow: 0 4px 16px #0008;
                z-index: 1000;
                font-family: sans-serif;
            }
            #jarvis-box div {
                padding: 10px;
            }
            #jarvis-box .header {
                border-bottom: 1px solid #444;
                font-weight: bold;
            }
            #jarvis-chat {
                height: 140px;
                overflow-y: auto;
                padding: 10px;
                font-size: 1em;
            }
            #jarvis-form {
                display: flex;
                border-top: 1px solid #444;
            }
            #jarvis-input {
                flex: 1;
                padding: 10px;
                border: none;
                background: #333;
                color: #fff;
                border-radius: 0 0 0 10px;
            }
            #jarvis-mic {
                padding: 10px 16px;
                background: #0078d7;
                color: #fff;
                border: none;
                border-radius: 0 0 10px 0;
                cursor: pointer;
            }
            .user-msg {
                margin: 8px 0;
                text-align: left;
            }
            .user-msg span {
                background: #444;
                padding: 6px 12px;
                border-radius: 12px 12px 12px 0;
                display: inline-block;
            }
            .jarvis-reply {
                margin: 8px 0;
                text-align: right;
            }
            .jarvis-reply span {
                background: #0078d7;
                padding: 6px 12px;
                border-radius: 12px 12px 0 12px;
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <div id="jarvis-box" style="position:fixed;bottom:30px;right:30px;width:320px;background:#222;color:#fff;border-radius:10px;box-shadow:0 4px 16px #0008;z-index:1000;font-family:sans-serif;">
            <div style="padding:10px;border-bottom:1px solid #444;font-weight:bold;">Jarvis</div>
            <div id="jarvis-chat" style="height:140px;overflow-y:auto;padding:10px;font-size:1em;"></div>
            <form id="jarvis-form" style="display:flex;border-top:1px solid #444;">
                <input id="jarvis-input" type="text" placeholder="Type or use mic..." autocomplete="off" style="flex:1;padding:10px;border:none;background:#333;color:#fff;border-radius:0 0 0 10px;">
                <button type="button" id="jarvis-mic" style="padding:10px 16px;background:#0078d7;color:#fff;border:none;border-radius:0 0 10px 0;cursor:pointer;">ðŸŽ¤</button>
            </form>
        </div>
        <script>
            const chat = document.getElementById('jarvis-chat');
            const form = document.getElementById('jarvis-form');
            const input = document.getElementById('jarvis-input');
            const micBtn = document.getElementById('jarvis-mic');

            // Simple Jarvis reply logic
            function jarvisReply(message) {
                let reply = "I'm Jarvis. How can I help you?";
                const msg = message.toLowerCase();
                if(msg.includes('hello') || msg.includes('hi')) reply = "Hello! How can I assist you today?";
                else if(msg.includes('your name')) reply = "I'm Jarvis, your assistant.";
                else if(msg.includes('time')) reply = "Current time is: " + new Date().toLocaleTimeString();
                else if(msg.includes('gl bajaj')) reply = "GL Bajaj is a renowned institute in Greater Noida.";
                // Speak the reply
                if ('speechSynthesis' in window) {
                    const utter = new SpeechSynthesisUtterance(reply);
                    window.speechSynthesis.speak(utter);
                }
                chat.innerHTML += `<div style="margin:8px 0;text-align:right;"><span style="background:#0078d7;padding:6px 12px;border-radius:12px 12px 0 12px;display:inline-block;">${reply}</span></div>`;
                chat.scrollTop = chat.scrollHeight;
            }

            // Text input handler
            form.onsubmit = function(e) {
                e.preventDefault();
                const userMsg = input.value.trim();
                if(!userMsg) return;
                chat.innerHTML += `<div style="margin:8px 0;text-align:left;"><span style="background:#444;padding:6px 12px;border-radius:12px 12px 12px 0;display:inline-block;">${userMsg}</span></div>`;
                input.value = '';
                setTimeout(() => jarvisReply(userMsg), 600);
                chat.scrollTop = chat.scrollHeight;
            };

            // Voice input handler
            micBtn.onclick = function() {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    alert('Speech recognition not supported in this browser.');
                    return;
                }
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                recognition.start();
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    chat.innerHTML += `<div class="user-msg"><span>${transcript}</span></div>`;
                    setTimeout(() => jarvisReply(transcript), 600);
                    chat.scrollTop = chat.scrollHeight;
                };
            };
        </script>
    </body>
</html>